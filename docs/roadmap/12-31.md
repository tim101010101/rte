# 2022-12-31

现在实现输入的思路存在问题

当用户输入时, 总应该产生已经激活的节点

而每次输入再重新激活的思路貌似是行不通的

```text
a**b*c
```

用户输入这段内容, 会被解析成

```text
a * *b * c
```

`*b` 会作为斜体内容, 而再次输入一个 `*`, 会触发 bold

这里没办法得知当前正在输入的节点产生了什么变化, 因此无法正确的确定光标该如何移动

也许需要重新构思一个实现来支持输入时激活的功能

那么需要的就是 parser 出已经激活的节点, 但是这里无法确定输入后会产生怎么样的变化, diff 其实不太可行

如果直接 parser 出已激活的节点, 在 init 时再单独将所有节点取消激活, 这样太呆了

从长计议

## 补档

能不能改变一下思路, 借助 DOMRect 来判断是否需要激活, 光标若处在 syntax 节点的 DOMRect 内,就激活这个节点

这样的好处是一方面可以避免大量的判断逻辑, 可以将大量不同情况规约为光标是否处在 DOMRect 中

另一个是如果按照这样的逻辑, 那么实现输入时自动激活的需求貌似就很水到渠成, 因为总会处在 DOMRect 的边界

开个新的分支搞吧
