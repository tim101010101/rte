# 1-8

- [ ] 重构激活逻辑, 并非插入 prefix 和 suffix, 而是将 text 替换为 source 源代码

主要好处在于

1. 省去很多复杂的逻辑
2. 保持与 block 激活的一致性
3. 优化性能

很关键的一点, 现在 line 的实现为了将 prefix 和 suffix 与内容视为整体做了很多特殊处理, 花了很多功夫

而如果将激活逻辑改为之前更改 text 的话, prefix 和 suffix 和节点内容天然就是整体

block 的激活希望能显示源代码, 以此来获取更好的编辑体验, 那么 line 和 block 的激活思路保持一致的话, 有利于工具函数的复用

而性能方面, 只是更换 textNode 的 text 而已, 影响范围很有限, 有利于 patch

具体的, 激活始终只会影响被激活节点, 其余部分已经被渲染的结果可以一定程度的复用, 这里不考虑长度改变产生 DOM 节点的位移

这个重构的影响范围不大, 但是可能会影响到 fence、vNode 的结构, 因此还是先重构完再来继续做 block
