# 2023-12-30

现在的代码太脏了，而且每次滚动都优先处理 top 导致往下滚动时有 bug，限位不好做

比较好的是往下滚动就把 offset 累加到 excess 上，然后类似 top 那样处理

但是这样的话，往下滚动会确定 bottom 的位置，而 top 的位置没法确定，而 render 函数需要确定的 top 的位置

也许重构一下 render 比较好，在 render 前置计算出 top 和 bottom

但是这样性能堪忧，因为渲染时本身就会得到行高，前置的单独为了计算行高而存在的性能开销其实都是浪费

那么这样吧，针对从上往下渲染和从下往上渲染分别实现算法，这样就可以避免前置计算所带来的性能开销了

不对，这个算法无法实现，因为从下往上渲染意味着需要先知道当前行高才能得知要渲染的目标 rect，而目标 rect 需要通过渲染得知，这条路走不通

那么这样，往下滚动时处理 bottom 和 excess，这样就可以很自然的做限位了
