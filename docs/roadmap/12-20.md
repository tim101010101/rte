# 2022-12-20

思考了一下, 发现现在的思路很难处理嵌套的 SyntaxNode 的激活问题, 比如

```text
**Hello _World_**
```

光标在这里

```text
**Hello World**
             ^
             |
```

当光标在这里时, 向左移动应该变成

```text
Hello World
           ^
           |
```

再向左移动变成

```text
Hello _World_
            ^
            |
```

不好处理, 先开个新的分支尝试另一个思路, 就是直接将 marker 的引用保存到 SyntaxNode 中

新分支 `dev-refactor-vnode`

## 补档

尝试了一下, 发现还是不行, 在 SyntaxNode 中的 meta 保存 prefix suffix, 是指向两个 marker 的引用

但是深拷贝时, 引用会被破坏, 如果专门处理 prefix 和 suffix 又显得不够优雅, 综合考虑下反倒还不如按照原有思路, 代码先保存在新分支中, 继续回到之前的 `dev` 顺着思路写
